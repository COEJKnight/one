rule_sql,rule_label,rule_description,rule_error_message,rule_cross_file_flag,file_type,severity_name,query_name
"SELECT approp.row_number, approp.tas, approp.gross_outlay_amount_by_tas_cpe, SUM(op.gross_outlay_amount_by_pro_cpe) as gross_outlay_amount_by_pro_cpe_sum FROM appropriation approp JOIN object_class_program_activity op ON approp.tas = op.tas AND approp.submission_id = op.submission_id WHERE approp.submission_id = {} GROUP BY approp.row_number, approp.tas, approp.gross_outlay_amount_by_tas_cpe HAVING approp.gross_outlay_amount_by_tas_cpe <> SUM(op.gross_outlay_amount_by_pro_cpe)",A18,"GrossOutlayAmountByTAS_CPE (file A) = sum of all GrossOutlayAmountByProgramObjectClass (file B) {When Program Activity and Object Class are not blank, this value is the sum of all Gross Outlay Amounts reported in file B, by TAS/Subaccount}",The GrossOutlayAmountByTAS_CPE amount in the appropriation file (A) does not equal the sum of the corresponding GrossOutlayAmountByProgramObjectClass_CPE values in the award financial file (B).,y,appropriations,warning,a18_cross_file
"SELECT approp.row_number, approp.tas, approp.obligations_incurred_total_cpe, SUM(op.obligations_incurred_by_pr_cpe) as obligations_incurred_by_pr_cpe_sum FROM appropriation approp JOIN object_class_program_activity op ON approp.tas = op.tas AND approp.submission_id = op.submission_id WHERE approp.submission_id = {} GROUP BY approp.row_number, approp.tas, approp.obligations_incurred_total_cpe HAVING approp.obligations_incurred_total_cpe <> SUM(op.obligations_incurred_by_pr_cpe)",A19,ObligationsIncurredTotalByTAS_CPE (File A) = sum of ObligationsIncurredByProgramObjectClass_CPE (File B),The ObligationsIncurredTotalByTAS_CPE amount in the appropriation file (A) does not equal the sum of the corresponding ObligationsIncurredByProgramObjectClass_CPE values in the award financial file (B).,y,appropriations,warning,a19_cross_file
"SELECT af.row_number, af.object_class from award_financial AS af WHERE af.submission_id = {} AND af.object_class NOT IN (SELECT object_class_code FROM object_class)",B11,"Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.","Failed rule: Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.",n,award_financial,warning,b11_award_financial_1
"SELECT af.row_number, af.object_class, af.by_direct_reimbursable_fun FROM award_financial af WHERE af.submission_id = {} AND LENGTH(af.object_class) = 4 AND ((LEFT(af.object_class,1) = '1' AND lower(af.by_direct_reimbursable_fun) IS DISTINCT FROM 'd') OR (LEFT(af.object_class,1) = '2' AND lower(af.by_direct_reimbursable_fun) IS DISTINCT FROM 'r'))",B11,"Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.","Failed rule: If object class is 4 digits, check that 1 digit prefix is consistent with value for ByDirectReimbursableFundingSource",n,award_financial,warning,b11_award_financial_2
"SELECT op.row_number, op.object_class from object_class_program_activity AS op WHERE op.submission_id = {} AND op.object_class NOT IN (SELECT object_class_code FROM object_class)",B11,"Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.","Failed rule: Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.",n,program_activity,warning,b11_object_class_program_activity_1
"SELECT op.row_number, op.object_class, op.by_direct_reimbursable_fun FROM object_class_program_activity op WHERE op.submission_id = {} AND LENGTH(op.object_class) = 4 AND ((LEFT(op.object_class,1) = '1' AND lower(op.by_direct_reimbursable_fun) IS DISTINCT FROM 'd') OR (LEFT(op.object_class,1) = '2' AND lower(op.by_direct_reimbursable_fun) IS DISTINCT FROM 'r'))",B11,"Must be valid 3-digit object class as defined in OMB Circular A-11 Section 83.6, or a 4-digit code which includes a 1-digit prefix that distinguishes direct, reimbursable, and allocation obligations. Do not include decimal points when reporting in the Schema.","Failed rule: If object class is 4 digits, check that 1 digit prefix is consistent with value for ByDirectReimbursableFundingSource",n,program_activity,warning,b11_object_class_program_activity_2
"SELECT af.row_number, af.by_direct_reimbursable_fun FROM award_financial AS af WHERE af.submission_id = {} AND (ussgl480100_undelivered_or_fyb IS NOT NULL OR ussgl480100_undelivered_or_cpe IS NOT NULL OR ussgl483100_undelivered_or_cpe IS NOT NULL OR ussgl488100_upward_adjustm_cpe IS NOT NULL OR ussgl490100_delivered_orde_fyb IS NOT NULL OR ussgl490100_delivered_orde_cpe IS NOT NULL OR ussgl493100_delivered_orde_cpe IS NOT NULL OR ussgl498100_upward_adjustm_cpe IS NOT NULL OR ussgl480200_undelivered_or_fyb IS NOT NULL OR ussgl480200_undelivered_or_cpe IS NOT NULL OR ussgl483200_undelivered_or_cpe IS NOT NULL OR ussgl488200_upward_adjustm_cpe IS NOT NULL OR ussgl490200_delivered_orde_cpe IS NOT NULL OR ussgl490800_authority_outl_fyb IS NOT NULL OR ussgl490800_authority_outl_cpe IS NOT NULL OR ussgl498200_upward_adjustm_cpe IS NOT NULL) AND COALESCE(by_direct_reimbursable_fun, '') = ''",B12,"Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".","Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".",n,award_financial,fatal,b12_award_financial_1
"SELECT af.row_number, af.by_direct_reimbursable_fun FROM award_financial AS af WHERE af.submission_id = {} AND COALESCE(lower(af.by_direct_reimbursable_fun),'') NOT IN ('', 'r', 'd')",B12,"Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".","The reimbursable flag indicator (bydirectreimbursablefundingsource) must be empty, R, or D",n,award_financial,fatal,b12_award_financial_2
"SELECT op.row_number, op.by_direct_reimbursable_fun FROM object_class_program_activity as op WHERE submission_id = {} AND (ussgl480100_undelivered_or_fyb IS NOT NULL OR ussgl480100_undelivered_or_cpe IS NOT NULL OR ussgl483100_undelivered_or_cpe IS NOT NULL OR ussgl488100_upward_adjustm_cpe IS NOT NULL OR ussgl490100_delivered_orde_fyb IS NOT NULL OR ussgl490100_delivered_orde_cpe IS NOT NULL OR ussgl493100_delivered_orde_cpe IS NOT NULL OR ussgl498100_upward_adjustm_cpe IS NOT NULL OR ussgl480200_undelivered_or_cpe IS NOT NULL OR ussgl480200_undelivered_or_fyb IS NOT NULL OR ussgl483200_undelivered_or_cpe IS NOT NULL OR ussgl488200_upward_adjustm_cpe IS NOT NULL OR ussgl490200_delivered_orde_cpe IS NOT NULL OR ussgl490800_authority_outl_fyb IS NOT NULL OR ussgl490800_authority_outl_cpe IS NOT NULL OR ussgl498200_upward_adjustm_cpe IS NOT NULL ) AND COALESCE(by_direct_reimbursable_fun, '') = ''",B12,"Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".","Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".",n,program_activity,fatal,b12_object_class_program_activity_1
"SELECT op.row_number, op.by_direct_reimbursable_fun FROM object_class_program_activity AS op WHERE op.submission_id = {} AND COALESCE(lower(op.by_direct_reimbursable_fun),'') NOT IN ('', 'r', 'd')",B12,"Reimbursable flag indicator is required when reporting obligation or outlay USSGL account balances (excluding downward adjustments SGL accounts). Valid values are ""R"" for ""ReimbursableFundingSource"" and ""D"" for ""DirectFundingSource"".","The reimbursable flag indicator (bydirectreimbursablefundingsource) must be empty, R, or D",n,program_activity,fatal,b12_object_class_program_activity_2
